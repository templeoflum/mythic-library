# Mythic System Explorer

Interactive frontend for exploring the three interconnected mythic systems: the **Mythic Library** (empirical corpus), the **Archetypal Context Protocol** (8D coordinate space), and **Miroglyph** (19-node narrative topology).

## Quick Start

```bash
# 1. Export data from all three systems into static JSON
python scripts/export_explorer_data.py

# 2. Start the local server
python scripts/serve_miroglyph.py

# 3. Open http://localhost:8080
```

## Two Applications

| App | URL | Purpose |
|-----|-----|---------|
| **Explorer** | `index.html` | Free-form exploration of nodes, archetypes, entities, and patterns |
| **Journey Mapper** | `journey.html` | Guided traversal experience with step-by-step selections |

### Journey Mapper

A guided experience that walks users through a MiroGlyph traversal, presenting contextually filtered choices at each node based on the structural template system.

**Features:**
- **Predefined Traversals**: 8 starter paths including "Shadow Spiral", "Mirror Journey", "Crisis Triangle"
- **Step-by-Step Selection**: At each node, choose an archetype, entity, and motif
- **Evidence-Based Filtering**: Motifs are filtered by Thompson category based on the node's evidence markers
- **Nontion Pauses**: Special pause screens for the center point with reflection prompts
- **Journey Persistence**: Save journeys to LocalStorage, export as JSON
- **Surprise Me**: Random selections for serendipitous discovery

**Flow:**
1. Start Screen → Choose "Surprise Me" or select a predefined path
2. Node Screen → Select archetype → entity → motif → optional note
3. Nontion Screen → Pause and reflect (no selections required)
4. Complete Screen → Review journey, save, or export

## Dual Orientation System

Miroglyph supports two valid spatial configurations that can be toggled via the gear menu:

| Configuration | Inner Ring | Middle Ring | Outer Ring | Use Case |
|--------------|------------|-------------|------------|----------|
| **Inverted** (default) | Descent (D) | Resonance (R) | Emergence (E) | Katabasis, shadow work, death-rebirth |
| **Standard** | Emergence (E) | Resonance (R) | Descent (D) | Creation myths, emanation, becoming |

**What stays fixed:**
- Resonance (R) is always the middle ring — the threshold, the mirror
- Nontion (∅) is always the center point — the pause, the reset
- Polarity pairs (1↔4, 2↔5, 3↔6) work identically in both
- Condition resonance (D1/R1/E1) works identically in both

**Key Insight:** Arcs are interpretive lenses, not ontological categories. The same Zeus can be viewed through D (destroyer of Titans), R (judge/witness), or E (creator of cosmic order) — same coordinates, different lens.

## Navigation Features

- **Breadcrumb Trail**: Tracks last 5 items viewed; click to revisit
- **"Surprise Me" Buttons**: Random discovery in each view
- **Cross-Referencing**: Every detail view links to related items (patterns → entities, motifs → patterns, etc.)
- **Interactive Mini-Map**: Click nodes to navigate, hover for tooltips
- **Fidelity Badges**: Green/yellow/red indicators for mapping quality on entity cards

## Views

| View | Purpose |
|------|---------|
| **Atlas** | Three-pane layout: Node Info (left) + Canvas with 19-node topology (center) + Traversal logging (right). Create and save paths, organize into groups. |
| **Codex** | Browse catalog items. Sub-tabs: **Archetypes** (997 with 8D coordinates, primordials, relationships), **Entities** (159 mapped from Library, 14 unmapped places/concepts), **Motifs** (149 Thompson Index codes with pattern cross-refs). |
| **Chronicle** | Analysis views. Sub-tabs: **Patterns** (18 cross-cultural patterns with mini-map), **Validation** (tier results with insights and audit cases). |

## Architecture

- **Vanilla JS** with IIFE module pattern — no framework
- **Tab router** with hash-based navigation (`#archetypes`, `#validation`, etc.)
- **Lazy initialization** — each tab loads data and builds DOM only on first visit
- **Static JSON data** — Python export script consolidates all system data into `data/`

## Directory Structure

```
miroglyph/
├── index.html              # Explorer: three-view layout for free-form exploration
├── journey.html            # Journey Mapper: guided traversal experience
├── data/                   # Pre-exported JSON (generated by export script)
│   ├── archetypes_catalog.json    # 997 archetypes with coordinates, primordials, relationships
│   ├── entities_catalog.json      # 173 entities (159 mapped) with ACP mappings and node assignments
│   ├── patterns_catalog.json      # 18 patterns with motifs, traditions, entities
│   ├── validation_summary.json    # v2 validation tiers, tests, audit cases
│   ├── node_profiles.json         # 18 node centroids from ACP profiling
│   ├── node_templates.json        # Node templates with evidence markers and prompts
│   └── archetype_affinities.json  # Archetype-to-node affinity scores
├── css/
│   ├── styles.css          # Base styles and CSS variables
│   ├── tabs.css            # Tab navigation and shared components
│   ├── view-atlas.css      # Atlas view (three-pane layout)
│   ├── view-codex.css      # Codex view (card grid + details)
│   ├── view-chronicle.css  # Chronicle view (patterns + validation)
│   └── journey.css         # Journey Mapper styles
└── js/
    ├── utils.js            # Shared utility functions (ensureArray, getFidelityClass)
    ├── nodes.js            # 19-node definitions (arcs, conditions, tones)
    ├── storage.js          # LocalStorage persistence + JSON import/export
    ├── data-loader.js      # Shared fetch-with-cache utility
    ├── nav.js              # Cross-navigation utilities
    ├── tab-router.js       # View navigation controller with hash routing
    ├── global-search.js    # Omni-search across nodes, archetypes, entities
    ├── canvas.js           # SVG canvas rendering for topology
    ├── card-renderer.js    # Shared card rendering utilities
    ├── enrichment.js       # ACP enrichment data loader
    ├── paths.js            # Traversal path management
    ├── node-drawer.js      # Side drawer with node details
    ├── detail-sheet.js     # Inline detail views for archetypes/entities
    ├── view-atlas.js       # Atlas view controller (canvas + traversals)
    ├── view-codex.js       # Codex view controller (archetypes/entities/motifs)
    ├── mini-map.js         # Compact node map for Chronicle
    ├── view-chronicle.js   # Chronicle view controller (patterns/validation)
    ├── app.js              # Main controller (boot sequence)
    ├── journey-app.js      # Journey Mapper boot sequence and routing
    ├── journey-state.js    # Journey state management and persistence
    ├── journey-ui.js       # Journey UI rendering and interactions
    └── journey-filters.js  # Motif filtering by evidence markers
```

## Data Pipeline

The frontend consumes pre-exported static JSON. To regenerate:

```bash
python scripts/export_explorer_data.py
```

This script uses `UnifiedLoader`, `ACPLoader`, and `LibraryLoader` to consolidate data from:
- ACP JSON-LD files (997 archetypes across 22 primordials)
- SQLite mythic patterns database (173 entities, 4000 segments, 149 motifs)
- Pre-computed outputs (node profiles, archetype affinities, validation results)

## Three-System Connection

```
Mythic Library          ACP                      Miroglyph
(empirical)             (theoretical)            (structural)
─────────────          ──────────────           ──────────────
173 entities    →→→    997 archetypes    →→→    19 nodes
4000 segments          8D coordinates           3 arcs × 6 conditions
149 motifs             22 primordials           Traversal paths
18 patterns            Relationships            Narrative topology
```

Entity Tracing follows the full chain: a library entity (e.g., Zeus) maps to an ACP archetype (arch:GR-ZEUS) via name matching, which maps to a Miroglyph node (E5) via Gaussian affinity scoring on 8D coordinates.

## Troubleshooting

### Tab switching stays on Atlas (known bug)
Sometimes clicking Codex or Chronicle tabs doesn't switch views - the page stays on Atlas.
- **Fix:** Hard refresh with `Ctrl+Shift+R` (Windows/Linux) or `Cmd+Shift+R` (Mac)
- This appears to be a browser caching issue with CSS/JS state

### Layout looks wrong / CSS not applying
1. Hard refresh: `Ctrl+Shift+R` (Windows/Linux) or `Cmd+Shift+R` (Mac)
2. Or use incognito/private window
3. Clear browser cache if persistent

### Codex/Chronicle tabs don't load data
- Must use HTTP server (not file:// protocol)
- Run: `python scripts/serve_miroglyph.py`
- Access: `http://localhost:8080`

### Duplicate actions in traversal editor
- Hard refresh to clear stale event listeners
- If issue persists after refresh, clear localStorage

## Original Specification

The original MiroGlyph v4 specification documents remain in this directory:
- `miroglyph_v4_context.md` — System overview and usage guide
- `miroglyph_v4_philosophy.md` — Design principles and philosophical foundation
- `miroglyph_v4_technical_spec.json` — Node definitions and schemas
